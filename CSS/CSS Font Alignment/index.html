<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FONT ALIGNMENT</title>
    <style>
      @font-face {
        font-family: "IS-ArzierVF";
        src: url("./IS-ArzierVF.ttf");
      }
      @font-face {
        font-family: "TWKLausanne-600";
        src: url("./TWKLausanne-600.woff2");
      }
      @font-face {
        font-family: "Romie-Regular";
        src: url("./Romie-Regular.otf");
      }
      @font-face {
        font-family: "Sunlight Italic-VF";
        src: url("./Sunlight Italic-VF.ttf");
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        --font-size: 200px;

        font-size: var(--font-size);

        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
      }
      main {
        height: 400px;
        overflow-y: hidden;

        display: flex;
        align-items: flex-end;

        background-color: #f8f8f8;
      }
      main > div {
        background-color: #e4e3e3;
        height: fit-content;
        position: relative;
      }

      rules-container,
      letter-container,
      letter-container span {
        all: unset;
      }

      rules-container {
        display: block;
        position: absolute;
        inset: 0;
        font-size: 10px;
        pointer-events: none;
      }
      rules-container > * {
        position: absolute;
        width: 100%;
        color: blue;
        border-bottom: 0.5px solid currentColor;
        --unit: calc(var(--font-size) / var(--units-per-em));
        bottom: calc((var(--value) - var(--descents)) * var(--unit));
        /* bottom: calc(var(--value) * var(--font-size) / var(--units-per-em)) -
          var(--descents); */
        /* bottom: calc(
          (var(--value) - var(--descents)) *
            (var(--font-size) / var(--units-per-em))
        ); */
        /* calc(var(--units-per-em) * 1000) * calc(var(--font-size) / 1000) */
      }

      rule-baseline {
      }

      letter-container {
        display: block;
        line-height: initial;
      }
      letter-container span {
        display: inline-block;
        vertical-align: text-bottom;
        /* height: 1em; */
      }
    </style>
  </head>
  <body>
    <main>
      <!-- ↓↓↓ TWK Lausanne ↓↓↓ -->
      <div
        style="
          font-family: 'TWKLausanne-600';
          --units-per-em: 2048;
          --descents: -410;
        "
        data-units-per-em="1000"
        data-descents="-200"
      >
        <letter-container>
          <span>fjLx</span>
        </letter-container>
        <rules-container>
          <rule-ascents
            style="--ascent: 1866; --value: 1866"
            data-ascent="1866"
            data-value="1866"
          >
            ascents
          </rule-ascents>
          <rule-capheight
            style="--capheight: 714; --value: 714"
            data-capheight="714"
            data-value="714"
          >
            capheight
          </rule-capheight>
          <rule-xheight
            style="--xheight: 517; --value: 517"
            data-xheight="517"
            data-value="517"
          >
            xheight
          </rule-xheight>
          <rule-baseline
            style="--baseline: 0; --value: 0"
            data-baseline="0"
            data-value="0"
          >
            baseline
          </rule-baseline>
          <rule-descents
            style="--descents: -410; --value: -410"
            data-descents="-410"
            data-value="-410"
          >
            descents
          </rule-descents>
          <!-- { "minX": -186, "minY": -215, "maxX": 1318, "maxY": 1058 } -->
          <rule-miny
            style="--miny: -215; --value: -215"
            data-miny="-215"
            data-value="-215"
          >
            miny
          </rule-miny>
          <rule-maxy
            style="--maxy: 1058; --value: 1058"
            data-maxy="1058"
            data-value="1058"
          >
            maxy
          </rule-maxy>
        </rules-container>
      </div>
      <!-- ↓↓↓ Romie ↓↓↓ -->
      <div
        style="
          font-family: 'Romie-Regular';
          --units-per-em: 1000;
          --descents: -290;
        "
        data-units-per-em="1000"
        data-descents="-200"
      >
        <letter-container>
          <span>fjLx</span>
        </letter-container>
        <rules-container>
          <rule-ascents
            style="--ascent: 1050; --value: 1050"
            data-ascent="1050"
            data-value="1050"
          >
            ascents
          </rule-ascents>
          <rule-capheight
            style="--capheight: 700; --value: 700"
            data-capheight="700"
            data-value="700"
          >
            capheight
          </rule-capheight>
          <rule-xheight
            style="--xheight: 500; --value: 500"
            data-xheight="500"
            data-value="500"
          >
            xheight
          </rule-xheight>
          <rule-baseline
            style="--baseline: 0; --value: 0"
            data-baseline="0"
            data-value="0"
          >
            baseline
          </rule-baseline>
          <rule-descents
            style="--descents: -290; --value: -290"
            data-descents="-290"
            data-value="-290"
          >
            descents
          </rule-descents>
          <!-- { "minX": -120, "minY": -288, "maxX": 1806, "maxY": 1051 } -->
          <rule-miny
            style="--miny: -288; --value: -288"
            data-miny="-288"
            data-value="-288"
          >
            miny
          </rule-miny>
          <rule-maxy
            style="--maxy: 1051; --value: 1051"
            data-maxy="1051"
            data-value="1051"
          >
            maxy
          </rule-maxy>
        </rules-container>
      </div>
      <!-- ↓↓↓ IS Arzier ↓↓↓ -->
      <div
        style="
          font-family: 'IS-ArzierVF';
          --units-per-em: 1000;
          --descents: -200;
        "
        data-units-per-em="1000"
        data-descents="-200"
      >
        <letter-container>
          <span>fjLx</span>
        </letter-container>
        <rules-container>
          <rule-ascents
            style="--ascent: 1000; --value: 1000"
            data-ascent="1000"
            data-value="1000"
          >
            ascents
          </rule-ascents>
          <rule-capheight
            style="--capheight: 700; --value: 700"
            data-capheight="700"
            data-value="700"
          >
            capheight
          </rule-capheight>
          <rule-xheight
            style="--xheight: 500; --value: 500"
            data-xheight="500"
            data-value="500"
          >
            xheight
          </rule-xheight>
          <rule-baseline
            style="--baseline: 0; --value: 0"
            data-baseline="0"
            data-value="0"
          >
            baseline
          </rule-baseline>
          <rule-descents
            style="--descents: -200; --value: -200"
            data-descents="-200"
            data-value="-200"
          >
            descents
          </rule-descents>
          <!-- <rule-minx style="--minx: 0; --value: 0" data-minx="0" data-value="0">
            minX
          </rule-minx> -->
          <rule-miny
            style="--miny: -220; --value: -220"
            data-miny="-220"
            data-value="-220"
          >
            minY
          </rule-miny>
          <!-- <rule-maxx
            style="--maxx: 1113; --value: 1113"
            data-maxx="1113"
            data-value="1113"
          >
            maxX
          </rule-maxx> -->
          <rule-maxy
            style="--maxy: 933; --value: 933"
            data-maxy="933"
            data-value="933"
          >
            maxY
          </rule-maxy>
        </rules-container>
      </div>
      <!-- ↓↓↓ Sunlight ↓↓↓ -->
      <div
        style="
          font-family: 'Sunlight Italic-VF';
          --units-per-em: 2000;
          --descents: -530;
        "
        data-units-per-em="2000"
        data-descents="-530"
      >
        <letter-container>
          <span>fjLx</span>
        </letter-container>
        <rules-container>
          <rule-ascents
            style="--ascent: 1690; --value: 1690"
            data-ascent="1690"
            data-value="1690"
          >
            ascents
          </rule-ascents>
          <rule-capheight
            style="--capheight: 1587; --value: 1587"
            data-capheight="1587"
            data-value="1587"
          >
            capheight
          </rule-capheight>
          <rule-xheight
            style="--xheight: 1042; --value: 1042"
            data-xheight="1042"
            data-value="1042"
          >
            xheight
          </rule-xheight>
          <rule-baseline
            style="--baseline: 0; --value: 0"
            data-baseline="0"
            data-value="0"
          >
            baseline
          </rule-baseline>
          <rule-descents
            style="--descents: -530; --value: -530"
            data-descents="-530"
            data-value="-530"
          >
            descents
          </rule-descents>
          <!-- { "minX": -594, "minY": -634, "maxX": 2730, "maxY": 2187 } -->
          <rule-miny
            style="--miny: -634; --value: -634"
            data-miny="-634"
            data-value="-634"
          >
            minY
          </rule-miny>
          <rule-maxy
            style="--maxy: 2187; --value: 2187"
            data-maxy="2187"
            data-value="2187"
          >
            maxY
          </rule-maxy>
        </rules-container>
      </div>
    </main>
    <script>
      const containers = document.querySelectorAll("main > div");
      for (const container of containers) {
        const span = container.querySelector("span");
        const rules = {
          ascents: container.querySelector("rule-ascents"),
          capheight: container.querySelector("rule-capheight"),
          xheight: container.querySelector("rule-xheight"),
          baseline: container.querySelector("rule-baseline"),
          descents: container.querySelector("rule-descents"),
          miny: container.querySelector("rule-miny"),
          maxy: container.querySelector("rule-maxy"),
        };
        const values = {
          ascents: Number(rules.ascents.dataset.ascent),
          capheight: Number(rules.capheight.dataset.capheight),
          xheight: Number(rules.xheight.dataset.xheight),
          baseline: Number(rules.baseline.dataset.baseline),
          descents: Number(rules.descents.dataset.descents),
          miny: Number(rules.miny.dataset.miny),
          maxy: Number(rules.maxy.dataset.maxy),
        };
        const data = {
          unitsPerEm: Number(container.dataset.unitsPerEm),
          realFontHeight: span.clientHeight,
        };

        for (const ruleId of Object.keys(rules)) {
          const rule = rules[ruleId];
          rule.style.bottom = `${(values[ruleId] / data.unitsPerEm) * 100}%`;
        }

        console.log(container, values, data);
      }
    </script>
  </body>
</html>
